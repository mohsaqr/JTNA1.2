---
name:  ClusterTNA
title: Cluster Transition Network Analysis
jrs:   '1.1'
refs:
  - JTNA
  - TNA
  - TNALAK
items:

    - name: instructions
      title: Instructions
      type: Html
      visible: True

    - name: clusteringNote
      title: Note
      type: Html
      visible: True

    - name: errorText
      title: Error
      type: Preformatted
      visible: False
    - name:  tnaTitle
      title: TNA
      type:  Preformatted
      visible: False
    ### BUILD MODEL
    - name:  buildModelTitle
      title: Model
      type:  Preformatted
      visible: False

    - name:  buildModelContent
      type:  Preformatted
      visible: False
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold

    - name: buildModel_plot
      type: Image
      width: 1000
      height: 800
      visible: False
      renderFun: .showBuildModelPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - buildModel_plot_cut
        - buildModel_plot_min_value
        - buildModel_plot_edge_label_size
        - buildModel_plot_node_size
        - buildModel_plot_node_label_size
        - buildModel_plot_layout

    - name: buildModel_histo
      type: Image
      width: 1000
      height: 800
      visible: False
      renderFun: .showBuildModelHisto
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold

    - name: buildModel_frequencies
      type: Image
      width: 1000
      height: 800
      visible: False
      renderFun: .showBuildModelFrequencies
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold

    - name: buildModel_mosaic
      type: Image
      width: 400
      height: 300
      visible: False
      renderFun: .showBuildModelMosaic
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - buildModel_digits


    ### CENTRALITY
    - name:  centralityTitle
      title: Centrality
      type:  Preformatted
      visible: False

    - name:  centralityContent
      type:  Preformatted
      visible: False
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - centrality_loops
        - centrality_normalize
        - centrality_Betweenness
        - centrality_BetweennessRSP
        - centrality_Closeness
        - centrality_ClosenessIn
        - centrality_ClosenessOut
        - centrality_Clustering
        - centrality_Diffusion
        - centrality_InStrength
        - centrality_OutStrength

    - name: centralityTable
      type: Table
      title: Centrality Measures
      visible: False
      columns:
        - name: state
          type: text
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - centrality_loops
        - centrality_normalize
        - centrality_Betweenness
        - centrality_BetweennessRSP
        - centrality_Closeness
        - centrality_ClosenessIn
        - centrality_ClosenessOut
        - centrality_Clustering
        - centrality_Diffusion
        - centrality_InStrength
        - centrality_OutStrength

    - name: centrality_plot
      type: Image
      width: 1000
      height: 800
      visible: False
      renderFun: .showCentralityPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - centrality_loops
        - centrality_normalize
        - centrality_Betweenness
        - centrality_BetweennessRSP
        - centrality_Closeness
        - centrality_ClosenessIn
        - centrality_ClosenessOut
        - centrality_Clustering
        - centrality_Diffusion
        - centrality_InStrength
        - centrality_OutStrength

    ### COMMUNITY
    - name:  communityTitle
      title: Community
      type:  Preformatted
      visible: False
    - name: communityErrorText
      title: Error
      type: Preformatted
      visible: False

    - name:  communityContent
      type:  Preformatted
      visible: False
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - community_methods
        - community_gamma

    - name: community_plot
      type: Image
      width: 1000
      height: 800
      visible: False
      renderFun: .showCommunityPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - community_methods
        - community_gamma

    - name: communityTable
      type: Table
      title: Community Assignments
      visible: False
      columns:
        - name: cluster
          title: Cluster
          type: text
        - name: state
          title: State
          type: text
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - community_methods
        - community_gamma

    ### CLIQUE

    - name:  cliquesTitle
      type:  Preformatted
      title: Cliques
      visible: False

    - name:  cliquesContent
      type:  Preformatted
      visible: False
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - cliques_size
        - cliques_threshold

    - name: cliques_multiple_plot
      type: Group
      title: ""
      visible: False
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - cliques_size
        - cliques_threshold
        - cliques_plot_cut
        - cliques_plot_min_value
        - cliques_plot_edge_label_size
        - cliques_plot_node_size
        - cliques_plot_node_label_size
        - cliques_plot_layout
      items:
      - name: cliques_plot1
        type: Image
        width: 1000
        height: 800
        visible: False
        renderFun: .showCliquesPlot1
      - name: cliques_plot2
        type: Image
        width: 1000
        height: 800
        visible: False
        renderFun: .showCliquesPlot2
      - name: cliques_plot3
        type: Image
        width: 1000
        height: 800
        visible: False
        renderFun: .showCliquesPlot3
      - name: cliques_plot4
        type: Image
        width: 1000
        height: 800
        visible: False
        renderFun: .showCliquesPlot4
      - name: cliques_plot5
        type: Image
        width: 1000
        height: 800
        visible: False
        renderFun: .showCliquesPlot5
      - name: cliques_plot6
        type: Image
        width: 1000
        height: 800
        visible: False
        renderFun: .showCliquesPlot6

    ### Bootstrap

    - name:  bootstrapTitle
      type:  Preformatted
      title: Bootstrap
      visible: False

    - name:  bootstrapTable
      type:  Table
      title: Bootstrap Results
      visible: False
      columns:
        - name: cluster
          title: Cluster
          type: text
        - name: from
          title: From
          type: text
        - name: to
          title: To
          type: text
        - name: weight
          title: Weight
          type: number
        - name: p_value
          title: p-value
          type: number
        - name: cr_lower
          title: CR Lower
          type: number
        - name: cr_upper
          title: CR Upper
          type: number
        - name: ci_lower
          title: CI Lower
          type: number
        - name: ci_upper
          title: CI Upper
          type: number
        - name: significant
          title: Significant
          type: text
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - bootstrap_iteration
        - bootstrap_level
        - bootstrap_method
        - bootstrap_range_low
        - bootstrap_range_up
        - bootstrap_threshold

    - name: bootstrap_plot
      type: Image
      width: 1000
      height: 800
      visible: False
      renderFun: .showBootstrapPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - bootstrap_iteration
        - bootstrap_level
        - bootstrap_method
        - bootstrap_range_low
        - bootstrap_range_up
        - bootstrap_threshold
        - bootstrap_plot_cut
        - bootstrap_plot_min_value
        - bootstrap_plot_edge_label_size
        - bootstrap_plot_node_size
        - bootstrap_plot_node_label_size
        - bootstrap_plot_layout


    ### Permutation

    - name:  permutationTitle
      type:  Preformatted
      title: Permutation
      visible: False

    - name:  permutationContent
      type:  Table
      title: Permutation Test Results
      visible: False
      columns:
        - name: cluster_comparison
          title: Cluster Comparison
          type: text
        - name: edge_name
          type: text
        - name: diff_true
          type: number
        - name: effect_size
          type: number
        - name: p_value
          type: number
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - permutation_iter
        - permutation_paired
        - permutation_level


    - name: permutation_plot
      type: Image
      width: 1000
      height: 1000
      visible: False
      renderFun: .showPermutationPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - permutation_iter
        - permutation_paired
        - permutation_level

    ### COMPARISONS

    # Network Difference Plot (first in Comparisons section)
    - name: compare_network_diff_plot
      type: Image
      title: Network Difference Plot
      width: 1000
      height: 800
      visible: False
      renderFun: .showCompareNetworkDiffPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - compare_network_diff_plot_cut
        - compare_network_diff_plot_min_value
        - compare_network_diff_plot_edge_label_size
        - compare_network_diff_plot_node_size
        - compare_network_diff_plot_node_label_size
        - compare_network_diff_plot_layout

    # Compare Network Properties (second in Comparisons section)
    - name: compareInstructions
      type: Html
      visible: False

    - name: compareTitle
      type: Preformatted
      title: Compare Network Properties
      visible: False

    - name: compare_plot
      type: Image
      title: Cluster Comparison Plot
      width: 700
      height: 500
      visible: False
      renderFun: .showComparePlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - compare_cluster_i
        - compare_cluster_j
        - compare_scaling
        - compare_plot_type

    - name: compareSummaryTable
      type: Table
      title: Summary Metrics
      visible: False
      columns:
        - name: metric
          title: Metric
          type: text
        - name: value
          title: Value
          type: number
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - compare_cluster_i
        - compare_cluster_j
        - compare_scaling

    - name: compareNetworkTable
      type: Table
      title: Network Properties
      visible: False
      columns:
        - name: metric
          title: Metric
          type: text
        - name: cluster_i
          title: Cluster 1
          type: number
        - name: cluster_j
          title: Cluster 2
          type: number
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - compare_cluster_i
        - compare_cluster_j
        - compare_scaling

    # Compare Sequences (third in Comparisons section)
    - name: compareSequencesTitle
      type: Preformatted
      title: Compare Sequences
      visible: False

    - name: compareSequences_plot
      type: Image
      title: Sequence Comparison Plot
      width: 700
      height: 500
      visible: False
      renderFun: .showCompareSequencesPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - compare_sequences_sub_min
        - compare_sequences_sub_max
        - compare_sequences_min_freq
        - compare_sequences_correction

    - name: compareSequencesTable
      type: Table
      title: Sequence Pattern Comparison
      visible: False
      columns:
        - name: pattern
          title: Pattern
          type: text
        - name: length
          title: Length
          type: integer
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - compare_sequences_sub_min
        - compare_sequences_sub_max
        - compare_sequences_min_freq
        - compare_sequences_correction

    ### SEQUENCE ANALYSIS

    - name: sequences_plot
      type: Image
      title: Sequence Analysis Plot
      width: 1000
      height: 800
      visible: False
      renderFun: .showSequencesPlot
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - sequences_type
        - sequences_scale
        - sequences_geom
        - sequences_include_na
        - sequences_tick

    ### SEQUENCE INDICES

    - name: indicesTitle
      type: Preformatted
      title: Sequence Indices
      visible: False

    - name: indicesTable
      type: Table
      title: Sequence Indices
      visible: False
      columns:
        - name: sequence_id
          title: Seq
          type: integer
        - name: actor
          title: Actor
          type: text
        - name: cluster
          title: Cluster
          type: integer
        - name: valid_n
          title: Valid N
          type: integer
        - name: unique_states
          title: Unique
          type: integer
        - name: longitudinal_entropy
          title: Entropy
          type: number
        - name: simpson_diversity
          title: Simpson
          type: number
        - name: mean_spell_duration
          title: Mean Spell
          type: number
        - name: self_loop_tendency
          title: Self-Loop
          type: number
        - name: transition_rate
          title: Trans Rate
          type: number
        - name: first_state
          title: First
          type: text
        - name: last_state
          title: Last
          type: text
        - name: dominant_state
          title: Dominant
          type: text
        - name: complexity_index
          title: Complexity
          type: number
      clearWith:
        - buildModel_variables_long_actor
        - buildModel_variables_long_time
        - buildModel_variables_long_action
        - buildModel_variables_long_order
        - clustering_k
        - clustering_dissimilarity
        - clustering_method
        - buildModel_type
        - buildModel_scaling
        - buildModel_threshold
        - indices_favorable
        - indices_omega

...
